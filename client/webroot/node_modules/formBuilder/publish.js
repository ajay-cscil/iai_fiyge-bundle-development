var webformRender=function(options){
	var formID=options.formID || "";
	var boxID=options.boxID||"";
	var url=options.url|| "";
	var params=options.params|| {};
	var contentbuffer=50;
	params["id"]=formID;
	params["dt"]=encodeURIComponent((new Date()).toString());
	var queryString = Object.keys(params).map(function(key) {
			    		return key + '=' + params[key]
					}).join('&');

	var webformiframe = document.createElement("iframe");
	webformiframe.src = url+'/web_forms/web_forms/publish?'+queryString;
	webformiframe.width = "99%";
	webformiframe.height = "auto";
	webformiframe.frameBorder ="0";
	webformiframe.scrolling = "0";
	webformiframe.style.border= "none";
	webformiframe.style.background = "white";
	var analytics={
		"cookies":navigator.cookieEnabled,
		"browser_language":navigator.browserLanguage,
		"language":navigator.language,
		"platform":navigator.platform,
		"connection_speed":navigator.connectionSpeed,
		"user_agent":navigator.userAgent,
		"webdriver":navigator.webdriver,
		"website_url":document.location.href,
		"referrer":document.referrer
	}
	webformiframe.onload=function(){
		webformiframe.contentWindow.postMessage(JSON.stringify(analytics),"*");
	}
	document.getElementById(boxID).appendChild(webformiframe);

	window.addEventListener('message', function(e) {
		var eventName = e.data[0];
		var data = e.data[1];
		console.log(e.data);
		switch(eventName) {
			case 'setHeight':
			  webformiframe.height=e.data[1]+contentbuffer;
			  break;
		  	}
		}, false);	
}