[
	{
		"old_id":"24",
		"name":"Always True",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":" ",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2012-08-17 12:59:52",
		"modified":"2013-02-27 12:46:43",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"1",
		"rgt":"2",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-2c34-4f91-b622-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"94",
		"name":"terminate other child node",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"  $sib = $object->siblings();\r\n    $nodes = array();\r\n    if (is_array($sib)) {\r\n        foreach ($sib as $s) {\r\n            $nodes[] = $s['id'];\r\n        }\r\n        $object->terminateNodes($nodes);\r\n    }",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-18 16:42:32",
		"modified":"2013-07-11 11:55:26",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"0",
		"revision":"1",
		"old_parent_id":"0",
		"lft":"3",
		"rgt":"4",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-36c0-4c46-9dc4-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"95",
		"name":"Approved Issue For Fixing ",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"if (isset($object->data['entity']['bug_type']) && !empty($object->data['entity']['bug_type'])) {\r\n    $ticketType = current(\\module\\cases\\model\\bug_types::getInstance(array(), true)->read($object->data['entity']['bug_type']));\r\n    $type = $ticketType['bu",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-19 18:37:39",
		"modified":"2013-03-18 13:57:21",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"5",
		"rgt":"6",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-3bd4-4960-8dbf-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"96",
		"name":"Deferred choice",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$sib = $object->siblings();\r\n    $nodes = array();\r\n    if (is_array($sib)) {\r\n        foreach ($sib as $s) {\r\n            $nodes[] = $s['id'];\r\n        }\r\n        $object->terminateNodes($nodes);\r\n    }",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-19 20:58:33",
		"modified":"2013-02-27 12:48:01",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"7",
		"rgt":"8",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-40e8-42c9-98ef-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"97",
		"name":"Sibling",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$sib = $object->siblings();\r\n    $nodes = array();\r\n    if (is_array($sib)) {\r\n        foreach ($sib as $s) {\r\n            $nodes[] = $s['id'];\r\n        }\r\n        $object->terminateNodes($nodes);\r\n    }\r\n    ",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-20 15:30:44",
		"modified":"2013-02-27 12:48:18",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"9",
		"rgt":"10",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-45fc-4c2b-b104-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"98",
		"name":"Action \"Implemented On production\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $object->exitNode($object->node());",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-21 09:01:00",
		"modified":"2013-02-27 12:48:34",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"11",
		"rgt":"12",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-4b10-4218-b3c5-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"99",
		"name":"Deem approve for support",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"if (isset($object->data['entity']['type_id']) && !empty($object->data['entity']['type_id'])) {\r\n    $ticketType = current(\\module\\cases\\model\\config_ticket_types::getInstance(array(), true)->read($object->data['entity']['type_id']));\r\n    if (strcasecmp($",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-21 09:04:27",
		"modified":"2013-02-27 12:48:49",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"13",
		"rgt":"14",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-50ec-42e3-9834-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"100",
		"name":"Action \"Accept For Fixing\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->data['entity']['owned_by']=\\tushar\\user::read('id');\r\n$primaryKey=$object->entityObj->primaryKey;\r\nupdate(array('owned_by'=>$object->data['entity']['owned_by']))\r\n->from($object->entityObj)\r\n->where($object->entityObj->primaryKey,$object->data['e",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-21 11:36:10",
		"modified":"2013-03-18 16:19:21",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"15",
		"rgt":"16",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-5600-49f2-870e-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"101",
		"name":"Check for open issues in sprint backlog",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"if (isset($object->data['entity']) && isset($object->data['entity']['id']) && !empty($object->data['entity']['id'])) {\r\n    $nodeID = $object->node();\r\n\/\/ find any non completed task and stop approval\r\n\r\n    $completedStages = \\select(\"id\")\r\n            -",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-21 13:24:31",
		"modified":"2013-02-27 16:19:40",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"17",
		"rgt":"18",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-5b14-409e-9ab9-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"102",
		"name":"Stage \"Under Review\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$nodeID = $object->node();\r\nif (isset($object->data['entity']['type_id']) && !empty($object->data['entity']['type_id'])) {\r\n    $ticketType = \r\n\\current(\\module\\cases\\model\\config_ticket_types::getInstance(array(), true)\r\n                    ->read($objec",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-26 18:44:00",
		"modified":"2013-02-27 12:49:41",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"19",
		"rgt":"20",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-608c-489b-a265-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"106",
		"name":"Action \"Mark As Duplicate\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$actors=array(array('foreign_key_model'=>'users','foreign_key'=>\\tushar\\user::read('id')));\r\nforeach(\r\n\\select('user_id')->from(\\module\\cases\\model\\project_actors::getInstance(array(),true))->joinInner('project_actor_roles')\r\n->inserted()\r\n->where('projec",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-27 18:23:02",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"21",
		"rgt":"22",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-7540-4fd4-8ab9-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"107",
		"name":"Add Issues to current active sprint",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"isset($object->data['entity']['project_id']) && !empty($object->data['entity']['project_id'])",
		"then_condition":"$systemDate = \\tushar\\locale::systemDate() . \" \" . \\tushar\\locale::systemTime();\r\n$springObj = \\module\\cases\\model\\sprints::getInstance(array(), true);\r\n$sprint = \\select(\"*\")\r\n        ->from($springObj)\r\n        ->where('project_id', $object->data['entit",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-01 13:42:59",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"23",
		"rgt":"24",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-7b1c-49c9-93c6-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"108",
		"name":"Approved",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->exitNode($object->node());",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-15 20:41:57",
		"modified":"2013-03-15 20:47:32",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"25",
		"rgt":"26",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-8030-40d5-b446-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"109",
		"name":"ACTION \"Won't fix it\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $stages = array(\"Won't Fix\");\r\n    $nodeID = $object->node();\r\n    $object->afterSerial($nodeID, $stages);\r\n    $object->exitNode($nodeID);\r\n",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-18 12:50:49",
		"modified":"2013-03-18 14:30:17",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"27",
		"rgt":"28",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-85a8-4715-86a2-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"110",
		"name":"Action \"Mark As Completed\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $nodeID = $object->node();\r\n    $object->exitNode($nodeID);\r\n",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-18 14:12:26",
		"modified":"2013-03-18 17:51:10",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"29",
		"rgt":"30",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-8abc-4a39-820a-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"111",
		"name":"Action \"Accept In Sprint\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $nodeID = $object->node();\r\n    $object->exitNode($nodeID);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-18 16:21:34",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"31",
		"rgt":"32",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-9098-4095-a997-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"112",
		"name":"Action \"Mark Invalid\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $nodeID = $object->node();\r\n    $stages = array(\"Invalid\");\r\n    $object->afterSerial($nodeID, $stages);\r\n    $object->exitNode($nodeID);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-18 16:23:13",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"33",
		"rgt":"34",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-9610-495f-9f0f-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"113",
		"name":"Action \"Submit For Testing\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $nodeID = $object->node();\r\n    $object->exitNode($nodeID);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-18 16:25:31",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"35",
		"rgt":"36",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-9b24-45d1-9855-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"114",
		"name":"Action \"Accept As Ship Ready\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $nodeID = $object->node();\r\n    $object->exitNode($nodeID);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-18 16:27:47",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"37",
		"rgt":"38",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-a09c-473f-a3fe-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"115",
		"name":"Action \"Migrated to Production\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $nodeID = $object->node();\r\n    $object->exitNode($nodeID);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-18 16:31:27",
		"modified":"2013-03-18 16:34:36",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"39",
		"rgt":"40",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-a5b0-4df6-b11a-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"116",
		"name":"Action \"Skip Production\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $nodeID = $object->node();\r\n    $object->exitNode($nodeID);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-18 16:33:02",
		"modified":"2013-03-18 16:34:59",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"41",
		"rgt":"42",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-ab28-4e1a-9a45-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"117",
		"name":"Action \"Meeting Completed\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $nodeID = $object->node();\r\n    $object->exitNode($nodeID);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-03-18 16:38:53",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"43",
		"rgt":"44",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-b03c-47da-b524-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"105",
		"name":"Flexflow Action \"Cannot Duplicate Issue\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"\t    $stage = 'document closed';\r\n            $actors=array(array('foreign_key_model'=>'users','foreign_key'=>\\tushar\\user::read('id')));\r\nforeach(\r\n\\select('user_id')->from(\\module\\cases\\model\\project_actors::getInstance(array(),true))->joinInner('projec",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-02-27 18:21:13",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"45",
		"rgt":"46",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-702c-45fa-8200-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"18",
		"name":"Leads",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"afterProcessData",
		"if_condition":"!isset($object->data['owned_by'])",
		"then_condition":"$object->data['owned_by']=\\tushar\\user::read('id');\r\n$object->data['__owned_by']=\\tushar\\user::read('name');\r\n",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2012-08-09 13:02:11",
		"modified":"2013-09-11 19:27:13",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"0",
		"revision":"1",
		"old_parent_id":"0",
		"lft":"53",
		"rgt":"54",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-1208-4dae-9573-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"118",
		"name":"Test RULE FOR JSON RPC",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"$object->param(\"child\") == 1",
		"then_condition":"$object->set(\"destination_location\",\"X\/Y\/12\");",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-05-27 21:35:28",
		"modified":"2013-05-27 21:42:45",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":null,
		"revision":"1",
		"old_parent_id":"0",
		"lft":"57",
		"rgt":"58",
		"deleted":"0",
		"record_flags":"0",
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-b550-4790-9b15-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"131",
		"name":"Action \"Approved By Account Manager\"",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"    $nodeID = $object->node();\r\n    $object->exitNode($nodeID);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-09-05 21:39:02",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":"0",
		"lft":"77",
		"rgt":"78",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-ea0c-4b5f-a656-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"132",
		"name":"Supplier Invoice Approval",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"$object->data['total'] < 5000",
		"then_condition":"$object->exitNode($object->node());",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-09-06 13:23:05",
		"modified":"2013-09-06 14:11:32",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":"0",
		"lft":"79",
		"rgt":"80",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-ef20-4c33-9338-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"135",
		"name":"Auto process",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->setRUN($object->node(),true);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-10-10 17:03:14",
		"modified":"2013-10-11 23:39:25",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":"0",
		"lft":"85",
		"rgt":"86",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-fe5c-48bc-89e5-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"137",
		"name":"Deny",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->terminateSelf(true);",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-10-12 10:31:37",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":"0",
		"lft":"89",
		"rgt":"90",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-0884-4e00-bc4c-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"138",
		"name":"Send Ambulance (Choice=1)",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"$object->data['entity']['amount'] = 1",
		"then_condition":"  $sib = $object->siblings();\r\n    $nodes = array();\r\n    if (is_array($sib)) {\r\n        foreach ($sib as $s) {\r\n            $nodes[] = $s['id'];\r\n        }\r\n        $object->terminateNodes($nodes);\r\n    }",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-10-12 10:53:18",
		"modified":"2013-10-12 11:09:26",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":"0",
		"lft":"91",
		"rgt":"92",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-0d98-4bd0-9707-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"139",
		"name":"Send Police Car (Choice=2)",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"$object->data['entity']['amount'] = 2",
		"then_condition":"  $sib = $object->siblings();\r\n    $nodes = array();\r\n    if (is_array($sib)) {\r\n        foreach ($sib as $s) {\r\n            $nodes[] = $s['id'];\r\n        }\r\n        $object->terminateNodes($nodes);\r\n    }",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-10-12 11:07:58",
		"modified":"2013-10-12 11:19:06",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":"0",
		"lft":"93",
		"rgt":"94",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-1310-461f-a0a5-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"140",
		"name":"Multi Choice",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$nodeID = array();\r\n$outgoing = $object->outgoing();\r\nif (isset($outgoing['log_nodes']) && is_array($outgoing['log_nodes'])) {\r\n    foreach ($outgoing['log_nodes'] as $log) {\r\n        if (isset($object->data['entity']['choice'])) {\r\n            switch ($object->data['entity']['choice']) {\r\n                case \"Fire In Building\":\r\n                    if (!in_array($log['stage_name'], array('Dispatch Ambulance', 'Dispatch Fire Truck', 'Dispatch Police Car')))\r\n                        $nodeID[] = $log['id'];\r\n                    break;\r\n                case \"Person got heart attack\":\r\n                    if (!in_array($log['stage_name'], array('dispatch ambulance')))\r\n                        $nodeID[] = $log['id'];\r\n                    break;\r\n\r\n                case \"Car accident\":\r\n                    if (!in_array($log['stage_name'], array('dispatch ambulance', 'dispatch police car')))\r\n                        $nodeID[] = $log['id'];\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\nif(!empty($nodeID)){\r\n    $object->terminateNodes($nodeID);\r\n}",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-10-12 14:45:12",
		"modified":"2013-10-14 19:19:54",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":"0",
		"lft":"95",
		"rgt":"96",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"52611f7e-1824-491a-ba34-1d890acef1b9",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Approve",
		"description":"",
		"runlevel":"2",
		"filter_path":"-",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->exitNode();",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2013-10-29 17:29:57",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":"1",
		"revision":"2",
		"old_parent_id":null,
		"lft":"105",
		"rgt":"106",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":null,
		"stage_id":null,
		"id":"526ff095-e048-459d-a63b-21e70aec906d",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Confirm PO",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_orders",
		"event":"",
		"if_condition":"1",
		"then_condition":"\r\n\/\/ if not set, then set draft as current node.\r\n        \/\/  log is empty\r\n        if (!$object->isLogSet()) {\r\n            \/\/  set nodes\r\n            $object->setWorkflowLog(array(array('can_edit' => 1, 'foreign_key' => \\tushar\\user::read('id'), 'foreign_key_model' => 'users')));\r\n        }\r\n        \/\/  then set draft as current node.->invoke enter event for current stage\r\n        $node = $object->node($object->nodeID());\r\n        \/\/ check if node is valid and exists in log.\r\n        $dataOrder=$object->data['entity'];\r\n        if(is_array($dataOrder)){\r\n           $poObject=\\module\\stock\\model\\inbound_shipments::getInstance();\r\n           $dataOrder['purchase_order_id']=$dataOrder['id'];\r\n           $dataOrder['__purchase_order_id']=$dataOrder['id'];\r\n           $dataOrder['purchase_order_id_model']='purchase_orders';\r\n           $dataOrder=array_diff_key($dataOrder,\r\n           array($poObject->primaryKey=>1,\r\n           'status'=>1,\r\n           '_acl'=>1,\r\n           '_acl_edit'=>1,\r\n           '_acl_delete'=>1));\r\n           if(isset($dataOrder['config_purchase_order_lines']) && is_array($dataOrder['config_purchase_order_lines'])){\r\n               $dataOrder['config_inbound_shipment_lines']=array();\r\n               foreach($dataOrder['config_purchase_order_lines'] as $line){\r\n                   if(!(isset($line['deleted']) && $line['deleted'] == 1)){\r\n                      unset($line['id']);\r\n                      $dataOrder['config_inbound_shipment_lines'][]=$line;       \r\n                   }\r\n               }\r\n               unset($dataOrder['config_purchase_order_lines']);\r\n           }\r\n           $dataOrder['action'] = array('draft'=>'draft');\r\n           if($poObject->save($dataOrder,array('atomic'=>true, 'validate'=>FALSE))){\r\n               $object->exitNode();\r\n           }    \r\n        }\r\n        ",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-09 23:21:42",
		"modified":"2014-01-17 17:30:44",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"7",
		"old_parent_id":null,
		"lft":"165",
		"rgt":"166",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"79",
		"stage_id":"0",
		"id":"52cf2f06-60e4-4935-bedb-52970ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Saved PQ",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_quotes",
		"event":"",
		"if_condition":"1",
		"then_condition":"if (!$object->isLogSet()) {\r\n    if ($object->setWorkflowLog(array(array('can_edit' => 1, 'foreign_key' => \\tushar\\user::read('id'), 'foreign_key_model' => 'users'))) === false) {\r\n        throw new \\Exception(sprintf(__('Could not initialize workflow log as draft stage not found for this workflow type')));\r\n    }\r\n}",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-09 23:50:21",
		"modified":"2014-01-13 15:10:26",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"2",
		"old_parent_id":null,
		"lft":"167",
		"rgt":"168",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"83",
		"stage_id":"0",
		"id":"52cf35bd-3d8c-44d8-b106-568b0ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Send for Approval PQ",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_quotes",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->exitNode();",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-09 23:55:07",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":null,
		"lft":"169",
		"rgt":"170",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"84",
		"stage_id":"0",
		"id":"52cf36db-61f4-4688-8d82-57150ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Approve PQ",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_quotes",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->exitNode();",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-09 23:57:16",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":null,
		"lft":"171",
		"rgt":"172",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"85",
		"stage_id":"0",
		"id":"52cf375c-2f48-42fa-9d51-562d0ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Save PO",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_quotes",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->exitNode();",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-10 00:11:14",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":null,
		"lft":"173",
		"rgt":"174",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"86",
		"stage_id":"0",
		"id":"52cf3aa2-e3dc-4971-b38a-587e0ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Generate Shipment",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_orders",
		"event":"",
		"if_condition":"1",
		"then_condition":"$dataOrder=$object->data['entity'];\r\nif(is_array($dataOrder)){\r\n   $poObject=\\module\\stock\\model\\inbound_shipments::getInstance();\r\n   $dataOrder['purchase_order_id']=$dataOrder['id'];\r\n   $dataOrder['__purchase_order_id']=$dataOrder['id'];\r\n   $dataOrder['purchase_order_id_model']='purchase_orders';\r\n   $dataOrder=array_diff_key($dataOrder,\r\n   array($poObject->primaryKey=>1,\r\n   'status'=>1,\r\n   '_acl'=>1,\r\n   '_acl_edit'=>1,\r\n   '_acl_delete'=>1));\r\n   if(isset($dataOrder['config_purchase_order_lines']) && is_array($dataOrder['config_purchase_order_lines'])){\r\n       $dataOrder['config_inbound_shipment_lines']=array();\r\n       foreach($dataOrder['config_purchase_order_lines'] as $line){\r\n           if(!(isset($line['deleted']) && $line['deleted'] == 1)){\r\n              unset($line['id']);\r\n              $dataOrder['config_inbound_shipment_lines'][]=$line;       \r\n           }\r\n       }\r\n       unset($dataOrder['config_purchase_order_lines']);\r\n   }\r\n   $dataOrder['action'] = array('draft'=>'draft');\r\n   if($poObject->save($dataOrder,array('atomic'=>true, 'validate'=>FALSE))){\r\n       $object->exitNode();\r\n   }    \r\n}",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-10 00:14:12",
		"modified":"2014-01-13 19:55:26",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"2",
		"old_parent_id":null,
		"lft":"175",
		"rgt":"176",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"80",
		"stage_id":"0",
		"id":"52cf3b54-4094-4dab-9c48-59580ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Received & Invoice",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_orders",
		"event":"",
		"if_condition":"1",
		"then_condition":"$dataOrder=$object->data['entity'];\r\nif(is_array($dataOrder)){\r\n   $poObject=\\module\\accounting\\model\\invoices::getInstance();\r\n   \/\/ @todo PO ID source link to be fixed once field is generated\r\n   \/\/$dataOrder['purchase_order_id']=$dataOrder['id'];\r\n   \/\/$dataOrder['__purchase_order_id']=$dataOrder['id'];\r\n   \/\/$dataOrder['purchase_order_id_model']='purchase_orders';\r\n   if ((array_key_exists('name',$dataOrder)) && (empty($dataOrder['name']))){\r\n    $inv_name = 'Invoice for Purchase Order#'.$dataOrder['id'];\r\n    $dataOrder['name']=$inv_name;\r\n   }\r\n   $dataOrder=array_diff_key($dataOrder,\r\n   array($poObject->primaryKey=>1,\r\n   'status'=>1,\r\n   '_acl'=>1,\r\n   '_acl_edit'=>1,\r\n   '_acl_delete'=>1));\r\n   if(isset($dataOrder['config_purchase_order_lines']) && is_array($dataOrder['config_purchase_order_lines'])){\r\n       $dataOrder['invoice_lines']=array();\r\n       foreach($dataOrder['config_purchase_order_lines'] as $line){\r\n           if(!(isset($line['deleted']) && $line['deleted'] == 1)){\r\n              unset($line['id']);\r\n              $dataOrder['invoice_lines'][]=$line;       \r\n           }\r\n       }\r\n       unset($dataOrder['config_purchase_order_lines']);\r\n   }\r\n   $dataOrder['action'] = array('draft'=>'draft');\r\n   if($poObject->save($dataOrder,array('atomic'=>true, 'validate'=>FALSE))){\r\n       $object->exitNode();\r\n   }    \r\n}",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-10 00:14:58",
		"modified":"2014-01-14 17:03:05",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"12",
		"old_parent_id":null,
		"lft":"177",
		"rgt":"178",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"81",
		"stage_id":"0",
		"id":"52cf3b83-1720-4114-976d-57150ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Convert to PO",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_quotes",
		"event":"",
		"if_condition":"1",
		"then_condition":"$dataQuote=$object->data['entity'];\r\nif(is_array($dataQuote)){\r\n   $poObject=\\module\\purchase\\model\\purchase_orders::getInstance();\r\n   $dataQuote['purchase_quote_id']=$dataQuote['id'];\r\n   $dataQuote['__purchase_quote_id']=$dataQuote['name'];\r\n   $dataQuote['purchase_quote_id_model']='purchase_quotes';\r\n   \/\/$dataQuote['request_delivery']=date('Y-m-d H:i:s');\r\n   \/\/$dataQuote['delivery_date']=date(\"Y-m-d H:i:s\", strtotime(\"+ 10 day\"));\r\n   $dataQuote=array_diff_key($dataQuote,\r\n   array($poObject->primaryKey=>1,\r\n   'status'=>1,\r\n   '_acl'=>1,\r\n   '_acl_edit'=>1,\r\n   '_acl_delete'=>1));\r\n   if(isset($dataQuote['config_purchase_quote_lines']) && is_array($dataQuote['config_purchase_quote_lines'])){\r\n       $dataQuote['config_purchase_order_lines']=array();\r\n       foreach($dataQuote['config_purchase_quote_lines'] as $line){\r\n           if(!(isset($line['deleted']) && $line['deleted'] == 1)){\r\n              unset($line['id']);\r\n              $dataQuote['config_purchase_order_lines'][]=$line;       \r\n           }\r\n       }\r\n       unset($dataQuote['config_purchase_quote_lines']);\r\n   }\r\n   $dataQuote['action'] = array('draft'=>'draft');\r\n   if($poObject->save($dataQuote,array('atomic'=>true, 'validate'=>FALSE))){\r\n       $object->exitNode();\r\n   }    \r\n}",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-10 14:28:39",
		"modified":"2014-01-13 20:31:06",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"9",
		"old_parent_id":null,
		"lft":"179",
		"rgt":"180",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"78",
		"stage_id":"0",
		"id":"52d00397-0d8c-4c3e-8259-1dba0ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Submit for Approval PQ",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_quotes",
		"event":"",
		"if_condition":"1",
		"then_condition":"  if (!$object->isLogSet()) {\r\n            \/\/  set nodes\r\n            $object->setWorkflowLog(array(array('can_edit' => 1, 'foreign_key' => \\tushar\\user::read('id'), 'foreign_key_model' => 'users')));\r\n        }\r\n        \/\/  then set draft as current node.->invoke enter event for current stage\r\n        $node = $object->node($object->nodeID());\r\n        \/\/ check if node is valid and exists in log.\r\n        if ($node['status'] == 'open') {\r\n            $object->logAction($node['id']);\r\n            \/\/ exit current stage\r\n            $object->exitNode();\r\n        }",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-10 14:56:40",
		"modified":"2014-01-13 15:09:02",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"2",
		"old_parent_id":null,
		"lft":"183",
		"rgt":"184",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"87",
		"stage_id":"0",
		"id":"52d00a28-dda8-4ba8-a85e-20e30ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Disapprove",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_quotes",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->exitNode();",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-13 17:22:15",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":null,
		"lft":"185",
		"rgt":"186",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"90",
		"stage_id":"0",
		"id":"52d420c7-4dc8-40d8-8f9e-77af0ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Invoiced",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_orders",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->exitNode();",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-13 17:28:17",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":null,
		"lft":"187",
		"rgt":"188",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"82",
		"stage_id":"0",
		"id":"52d42231-c94c-44cb-86e5-788a0ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Email RFQ",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_quotes",
		"event":"",
		"if_condition":"1",
		"then_condition":"$data=$object->data;\r\n\r\n\/\/ localize dates\r\n\/\/        $data['entity']['effective_from'] = \\tushar\\locale::localize($data['entity']['effective_from'],DATE);\r\n\/\/        $data['entity']['effective_to'] = \\tushar\\locale::localize($data['entity']['effective_to'],DATE);\r\n\r\n\/\/ read account details\r\n$account = current(\\module\\crm\\model\\accounts::getInstance()->read($object->data['entity']['account_id']));\r\n        $to = isset($account['email_addresses']) ? current($account['email_addresses']) : '';\r\n        if (is_array($to)) {\r\n            $to = $to['email'];\r\n        }\r\n        $data['accounts']=$account;        \r\n\/\/ read template        \r\n        $printviewObj = \\module\\core\\model\\printviews::getInstance();\r\n        $template = \\select(\"*\")->from($printviewObj)->inserted()->where('business_key', \"purchase_quotes\")->execute()->fetch(\\PDO::FETCH_ASSOC);\r\n        if (empty($template)) {\r\n            throw new \\Exception(sprintf(__(\"Please configure printview template with key \\\"%s\\\"\",\"module\"), 'purchase_quotes'));\r\n        }\r\n        if (empty($to)) {\r\n            throw new \\Exception(__(\"Account does not have email address configured\"));\r\n        }\r\n\/\/ read email template        \r\n        $notification = \\tushar\\configuration::read('purchase_quotes');\r\n        $notification=isset($notification['request_for_quotation_email'])?$notification['request_for_quotation_email']:array();  \r\n        if (empty($notification)) {\r\n            throw new \\Exception(sprintf(__(\"Please configure quote email to be send to client in purchase.purchase_quotes.request_for_quotation_email\",\"module\"), 'purchase'));\r\n        }\r\n\r\n        $pages = \\module\\core\\controller\\printviews_domain_logic::processTags($template['content']);\r\n        $company = current(\\module\\crm_base\\model\\companies::getInstance(array(), true)->read(\\tushar\\user::read('company_id')));\r\n$data['companies']=$company; \r\n\r\n\r\n\/\/ generate pdf\r\n        $filename = tempnam(TMP, \"pdf-\") . \".pdf\";\r\n        $handle = fopen($filename, \"w\");\r\n        $view = new \\tushar\\view(\\tushar\\request::getInstance());\r\n        $view->generatePDF($pages, $template, $company)->render(false, $handle);\r\n        $notification['body'] = htmlspecialchars_decode($notification['body']);\r\n$data['users']=\\tushar\\user::readAll();\r\n\/\/ compose email\r\n        $email = array(\r\n            'attachments' => array(array('mime_type' => 'application\/pdf', 'error' => 0, 'tmp_name' => $filename, 'name' => 'RFQ.pdf'))\r\n            , 'subject' => $notification['subject']\r\n            , 'body' => $notification['body']\r\n            , 'email_to_recipients' => $to\r\n        );\r\n        if (\\tushar\\user::read('id') == false) {\r\n            $email['from_name'] = \\tushar\\configuration::read('administrator_name');\r\n            $email['from_email'] = \\tushar\\configuration::read('administrator_email');\r\n        }\r\n        \r\n        \/\/ process merge words in email subject\r\n        $array = \\tushar\\string::split($email['subject'], array(\"merge_words\" => \"\/\\{\\{[\\.\\w\\-]*\\}\\}\/i\"));\r\n        list($strings, $extracts) = $array;\r\n        if (isset($extracts['merge_words']) && is_array($extracts['merge_words'])) {\r\n            $extracts['merge_words'] = \\tushar\\string::cleanWords($extracts['merge_words']);\r\n            $extracts['merge_words'] = \\tushar\\string::populateWords($extracts['merge_words'], $data);\r\n            $email['subject'] = \\tushar\\string::merge($strings, $extracts);\r\n        }\r\n        \r\n        \/\/ process merge words in email body\r\n        $array = \\tushar\\string::split($email['body'], array(\"merge_words\" => \"\/\\{\\{[\\.\\w\\-]*\\}\\}\/i\"));\r\n        list($strings, $extracts) = $array;\r\n        if (isset($extracts['merge_words']) && is_array($extracts['merge_words'])) {\r\n            $extracts['merge_words'] = \\tushar\\string::cleanWords($extracts['merge_words']);\r\n            $extracts['merge_words'] = \\tushar\\string::populateWords($extracts['merge_words'], $data);\r\n            $email['body'] = \\tushar\\string::merge($strings, $extracts);\r\n        }\r\n        \r\n        \/\/ send email\r\n        $emailObj = \\module\\activities\\model\\emails::getInstance();\r\n        $emailObj->attachments->moveFile = false;\r\n        \r\n        $email = $emailObj->saveAndSend($email, array('atomic' => true, 'validate' => false));\r\n        fclose($handle);\r\n        unlink($filename);\r\n",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-13 18:22:12",
		"modified":null,
		"created_by":"1",
		"modified_by":null,
		"owned_by":"1",
		"revision":"1",
		"old_parent_id":null,
		"lft":"197",
		"rgt":"198",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"88",
		"stage_id":"0",
		"id":"52d42ed4-ce30-40e2-9044-7e540ac22bdf",
		"parent_id":""
	},
	{
		"old_id":"0",
		"name":"Resubmit for Approval",
		"description":"",
		"runlevel":"2",
		"filter_path":"\/module\/purchase\/model\/purchase_quotes",
		"event":"",
		"if_condition":"1",
		"then_condition":"$object->exitNode();",
		"else_condition":"",
		"is_terminal":"0",
		"run_once":"0",
		"created":"2014-01-17 17:49:31",
		"modified":"2014-01-17 17:54:26",
		"created_by":"1",
		"modified_by":"1",
		"owned_by":"1",
		"revision":"2",
		"old_parent_id":null,
		"lft":"199",
		"rgt":"200",
		"deleted":"0",
		"record_flags":null,
		"md5":null,
		"action_id":"95",
		"stage_id":"0",
		"id":"52d96d2b-1120-473c-baca-58d90ac22bdf",
		"parent_id":""
	}
]