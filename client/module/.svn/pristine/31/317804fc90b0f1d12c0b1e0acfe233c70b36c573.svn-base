[
    {
        "_acl": null,
        "_acl_delete": null,
        "_acl_edit": null,
        "_acl_tmp": null,
        "_acl_tmp_delete": null,
        "_acl_tmp_edit": null,
        "action_id": "92",
        "created": "2014-01-13 17:49:32",
        "created_by": "-1",
        "data_conflict": null,
        "deleted": "0",
        "description": null,
        "else_condition": null,
        "event": null,
        "filter_path": "\/module\/stock\/model\/inbound_shipments",
        "id": "52d4272c-e158-45f7-afbb-7a0c0ac22bdf",
        "if_condition": "1",
        "is_commit_pending": "0",
        "is_demo_data": "0",
        "is_public": "1",
        "is_terminal": null,
        "lft": null,
        "md5": null,
        "message_error": null,
        "message_info": null,
        "message_warn": null,
        "modified": "2014-04-04 00:07:26",
        "modified_by": "1",
        "module_id": "27263d19-e746-11e3-aad5-0800275f9930",
        "name": "Receive",
        "old_parent_id": null,
        "owned_by": "-2",
        "parent_id": null,
        "record_flags": null,
        "revision": "1",
        "rgt": null,
        "run_once": null,
        "runlevel": "2",
        "stage_id": null,
        "then_condition": "$dataIS = $object->data['entity'];\r\nif (is_array($dataIS)) {\r\n    if (!isset($dataIS['transfer_orders_id']) || empty($dataIS['transfer_orders_id']) || is_null($dataIS['transfer_orders_id'])){\r\n        $smObject = \\module\\stock\\model\\stock_moves::getInstance();\r\n        if (isset($dataIS['config_inbound_shipment_lines']) && is_array($dataIS['config_inbound_shipment_lines'])) {\r\n            foreach ($dataIS['config_inbound_shipment_lines'] as $line) {\r\n                if (!($line['deleted'] == 1)) {\r\n                    $smData = array();\r\n\t                $def_loc = \\select(array('location_id'))->from('\\\\module\\\\product\\\\model\\\\warehouse_locations')\r\n\t                \t\t\t->where(array('warehouse_id' => $dataIS['warehouse_id'],\r\n\t                                \t\t  'product_id' => $line['product_id']))->execute()->fetch(\\PDO::FETCH_COLUMN);\r\n\r\n\t                if (!isset($def_loc) || !$def_loc || is_null($def_loc) || empty($def_loc)){\r\n\t                \tthrow new \\Exception(sprintf(__(\"Please assign default location for Product - \\\"%s\\\".\",\"module\"), $line['__product_id']));\r\n\t                }\r\n\t                $smData['quantity'] = $line['quantity'];\r\n\t                $smData['source_location_id'] = 47;\r\n\t                $smData['destination_location_id'] = $def_loc;\r\n\t                $smData['description'] = $line['__product_id'];\r\n\t                $smData['type'] = 'Getting Goods';\r\n\t                $smData['status'] = 'Available';\r\n\t                $smData['product_id'] = $line['product_id'];\r\n\t                $smData['uom_id'] = $line['uom_id'];\r\n\t                $smData['related_to'] = $dataIS['id'];\r\n\t                $smData['__related_to'] = $dataIS['number'];\r\n                        $smData['related_to_model'] = 'inbound_shipments';\r\n                        $smData['memo'] = $dataIS['number'];\r\n\t                $smData['fulfillment_date'] = date('Y-m-d H:i:s');\r\n\t                $smObject->save($smData, array('atomic' => true, 'validate' => FALSE));\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t}\r\n    $object->exitNode();\r\n}"
    },
    {
        "_acl": null,
        "_acl_delete": null,
        "_acl_edit": null,
        "_acl_tmp": null,
        "_acl_tmp_delete": null,
        "_acl_tmp_edit": null,
        "action_id": "93",
        "created": "2014-01-13 17:53:05",
        "created_by": "-1",
        "data_conflict": null,
        "deleted": "0",
        "description": null,
        "else_condition": null,
        "event": null,
        "filter_path": "\/module\/stock\/model\/inbound_shipments",
        "id": "52d42801-eaa8-40fe-8ecc-7a0a0ac22bdf",
        "if_condition": "1",
        "is_commit_pending": "0",
        "is_demo_data": "0",
        "is_public": "1",
        "is_terminal": null,
        "lft": null,
        "md5": null,
        "message_error": null,
        "message_info": null,
        "message_warn": null,
        "modified": null,
        "modified_by": null,
        "module_id": "27263d19-e746-11e3-aad5-0800275f9930",
        "name": "Reset to Draft",
        "old_parent_id": null,
        "owned_by": "-2",
        "parent_id": null,
        "record_flags": null,
        "revision": "1",
        "rgt": null,
        "run_once": null,
        "runlevel": "2",
        "stage_id": null,
        "then_condition": "$object->exitNode();"
    },
    {
        "_acl": null,
        "_acl_delete": null,
        "_acl_edit": null,
        "_acl_tmp": null,
        "_acl_tmp_delete": null,
        "_acl_tmp_edit": null,
        "action_id": "113",
        "created": "2014-03-13 21:42:55",
        "created_by": "-1",
        "data_conflict": null,
        "deleted": "0",
        "description": null,
        "else_condition": null,
        "event": null,
        "filter_path": "\/module\/stock\/model\/inbound_shipments",
        "id": "5322265f-1974-4602-a9f3-19c3ac10068d",
        "if_condition": "1",
        "is_commit_pending": "0",
        "is_demo_data": "0",
        "is_public": "1",
        "is_terminal": null,
        "lft": null,
        "md5": null,
        "message_error": null,
        "message_info": null,
        "message_warn": null,
        "modified": null,
        "modified_by": null,
        "module_id": "27263d19-e746-11e3-aad5-0800275f9930",
        "name": "Deny Quote",
        "old_parent_id": null,
        "owned_by": "-2",
        "parent_id": null,
        "record_flags": null,
        "revision": "1",
        "rgt": null,
        "run_once": null,
        "runlevel": "2",
        "stage_id": null,
        "then_condition": "$object->exitNode();"
    },
    {
        "_acl": null,
        "_acl_delete": null,
        "_acl_edit": null,
        "_acl_tmp": null,
        "_acl_tmp_delete": null,
        "_acl_tmp_edit": null,
        "action_id": null,
        "created": "2014-03-20 18:57:40",
        "created_by": "-1",
        "data_conflict": null,
        "deleted": "0",
        "description": null,
        "else_condition": null,
        "event": "beforeSave",
        "filter_path": "\/module\/stock\/model\/inbound_shipments",
        "id": "532b3a24-63e0-47b7-9f1a-29cfac1006a4",
        "if_condition": "1",
        "is_commit_pending": "0",
        "is_demo_data": "0",
        "is_public": "1",
        "is_terminal": null,
        "lft": null,
        "md5": null,
        "message_error": null,
        "message_info": null,
        "message_warn": null,
        "modified": "2014-03-20 19:34:39",
        "modified_by": "1",
        "module_id": "27263d19-e746-11e3-aad5-0800275f9930",
        "name": "Required Date Inbound Shipment",
        "old_parent_id": null,
        "owned_by": "-2",
        "parent_id": null,
        "record_flags": null,
        "revision": "1",
        "rgt": null,
        "run_once": null,
        "runlevel": "2",
        "stage_id": null,
        "then_condition": "$Validtill=$object->data;\r\n\r\n\r\nif ((isset($Validtill['order_date']) && isset($Validtill['required_date']) || (!empty($Validtill['order_date']) && !empty($Validtill['required_date']))) && $Validtill['order_date']>$Validtill['required_date']) {\r\nthrow new \\Exception('Required date should be greater than Order Date');\r\n}\r\n\r\n"
    },
    {
        "_acl": null,
        "_acl_delete": null,
        "_acl_edit": null,
        "_acl_tmp": null,
        "_acl_tmp_delete": null,
        "_acl_tmp_edit": null,
        "action_id": "91",
        "created": "2014-01-13 17:41:18",
        "created_by": "-1",
        "data_conflict": null,
        "deleted": "0",
        "description": null,
        "else_condition": null,
        "event": null,
        "filter_path": "\/module\/stock\/model\/inbound_shipments",
        "id": "52d4253e-46c0-40b2-9fc2-79860ac22bdf",
        "if_condition": "1",
        "is_commit_pending": "0",
        "is_demo_data": "0",
        "is_public": "1",
        "is_terminal": null,
        "lft": "117",
        "md5": null,
        "message_error": null,
        "message_info": null,
        "message_warn": null,
        "modified": "2014-01-13 22:06:24",
        "modified_by": "1",
        "module_id": "27263d19-e746-11e3-aad5-0800275f9930",
        "name": "Confirm",
        "old_parent_id": null,
        "owned_by": "-2",
        "parent_id": null,
        "record_flags": null,
        "revision": "2",
        "rgt": "118",
        "run_once": null,
        "runlevel": "2",
        "stage_id": null,
        "then_condition": " if (!$object->isLogSet()) {\r\n            \/\/  set nodes\r\n            $object->setWorkflowLog(array(array('can_edit' => 1, 'foreign_key' => \\tushar\\user::read('id'), 'foreign_key_model' => 'users')));\r\n        }\r\n        \/\/  then set draft as current node.->invoke enter event for current stage\r\n        $node = $object->node($object->nodeID());\r\n        \/\/ check if node is valid and exists in log.\r\n        if ($node['status'] == 'open') {\r\n            $object->logAction($node['id']);\r\n            \/\/ exit current stage\r\n            $object->exitNode();\r\n        }"
    },
    {
        "_acl": null,
        "_acl_delete": null,
        "_acl_edit": null,
        "_acl_tmp": null,
        "_acl_tmp_delete": null,
        "_acl_tmp_edit": null,
        "action_id": "94",
        "created": "2014-01-13 17:56:07",
        "created_by": "-1",
        "data_conflict": null,
        "deleted": "0",
        "description": null,
        "else_condition": null,
        "event": null,
        "filter_path": "\/module\/stock\/model\/inbound_shipments",
        "id": "52d428b7-5920-4dc0-95c5-7a300ac22bdf",
        "if_condition": "1",
        "is_commit_pending": "0",
        "is_demo_data": "0",
        "is_public": "1",
        "is_terminal": null,
        "lft": "121",
        "md5": null,
        "message_error": null,
        "message_info": null,
        "message_warn": null,
        "modified": "2014-03-20 18:13:30",
        "modified_by": "1",
        "module_id": "27263d19-e746-11e3-aad5-0800275f9930",
        "name": "Validate",
        "old_parent_id": null,
        "owned_by": "-2",
        "parent_id": null,
        "record_flags": null,
        "revision": "2",
        "rgt": "122",
        "run_once": null,
        "runlevel": "2",
        "stage_id": null,
        "then_condition": "$dataIS = $object->data['entity'];\r\nif (is_array($dataIS)) {\r\n    if (!isset($dataIS['transfer_orders_id']) || empty($dataIS['transfer_orders_id']) || is_null($dataIS['transfer_orders_id'])){\r\n        \\update(array('status'=>'Done'))->from('\\\\module\\\\stock\\\\model\\\\stock_moves')\r\n                \t\t\t->where(array('related_to' => $dataIS['id']))->where(array('related_to_model' => 'inbound_shipments'))->execute();\r\n\t}\r\n    $object->exitNode();\r\n}"
    }
]